<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JCTNT - Jflex Cheap Table Name Translator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <!-- SVG Icons Sprite -->
    <svg style="display:none;">
        <symbol id="icon-database" viewBox="0 0 24 24">
            <ellipse cx="12" cy="5" rx="9" ry="3" fill="none" stroke="currentColor" stroke-width="2"/>
            <path d="M21 5v6c0 1.66-4.03 3-9 3s-9-1.34-9-3V5" fill="none" stroke="currentColor" stroke-width="2"/>
            <path d="M21 11v6c0 1.66-4.03 3-9 3s-9-1.34-9-3v-6" fill="none" stroke="currentColor" stroke-width="2"/>
        </symbol>
        <symbol id="icon-search" viewBox="0 0 24 24">
            <circle cx="11" cy="11" r="7" fill="none" stroke="currentColor" stroke-width="2"/>
            <path d="M21 21l-4.35-4.35" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </symbol>
        <symbol id="icon-plug" viewBox="0 0 24 24">
            <path d="M12 2v6M8 2v6M16 2v6M8 8h8a4 4 0 0 1 4 4v2a4 4 0 0 1-4 4h-1v4h-2v-4h-2v4H9v-4H8a4 4 0 0 1-4-4v-2a4 4 0 0 1 4-4z" fill="none" stroke="currentColor" stroke-width="2"/>
        </symbol>
        <symbol id="icon-arrow-right" viewBox="0 0 24 24">
            <path d="M5 12h14M12 5l7 7-7 7" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </symbol>
        <symbol id="icon-copy" viewBox="0 0 24 24">
            <rect x="9" y="9" width="13" height="13" rx="2" fill="none" stroke="currentColor" stroke-width="2"/>
            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" fill="none" stroke="currentColor" stroke-width="2"/>
        </symbol>
        <symbol id="icon-refresh" viewBox="0 0 24 24">
            <path d="M1 4v6h6M23 20v-6h-6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </symbol>
        <symbol id="icon-table" viewBox="0 0 24 24">
            <rect x="3" y="3" width="18" height="18" rx="2" fill="none" stroke="currentColor" stroke-width="2"/>
            <path d="M3 9h18M3 15h18M9 3v18" fill="none" stroke="currentColor" stroke-width="2"/>
        </symbol>
        <symbol id="icon-swap" viewBox="0 0 24 24">
            <path d="M7 16V4m0 0L3 8m4-4l4 4M17 8v12m0 0l4-4m-4 4l-4-4" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </symbol>
        <symbol id="icon-key" viewBox="0 0 24 24">
            <path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </symbol>
        <symbol id="icon-list" viewBox="0 0 24 24">
            <path d="M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </symbol>
        <symbol id="icon-chevron" viewBox="0 0 24 24">
            <path d="M6 9l6 6 6-6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </symbol>
    </svg>

    <!-- Header -->
    <div class="header">
        <div style="display:flex;align-items:center;">
            <svg class="icon icon-header icon-white"><use href="#icon-swap"/></svg>
            <div>
                <h1><span>JCTNT</span> - Jflex Cheap Table Name Translator</h1>
                <div class="header-sub">Traduttore nomi fisici â†” logici per tabelle e campi JAS</div>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- PAGE 1: CONNECTION -->
        <div id="page-connection" class="page active">
            <div class="card">
                <div class="card-title">
                    <svg class="icon"><use href="#icon-database"/></svg>
                    Step 1: Connessione al Database
                </div>
                
                <div class="form-group">
                    <label>Connessioni salvate</label>
                    <select id="conn-history-select">
                        <option value="">-- Inserimento manuale --</option>
                    </select>
                </div>

                <div class="form-row form-row-3">
                    <div class="form-group">
                        <label>Host</label>
                        <input type="text" id="conn-host" placeholder="192.168.x.x">
                    </div>
                    <div class="form-group">
                        <label>Porta</label>
                        <input type="text" id="conn-port" value="1521">
                    </div>
                    <div class="form-group">
                        <label>SID</label>
                        <input type="text" id="conn-sid" placeholder="ORCL">
                    </div>
                </div>
                <div class="form-row form-row-2">
                    <div class="form-group">
                        <label>Username</label>
                        <input type="text" id="conn-user">
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="conn-pass">
                    </div>
                </div>

                <div id="conn-status" class="status-box info">In attesa di connessione...</div>

                <button class="btn btn-primary btn-center" id="btn-connect">
                    <svg class="icon icon-white"><use href="#icon-plug"/></svg>
                    Connetti
                </button>
                
                <div id="btn-next-container" style="display:none; text-align:center; margin-top:15px;">
                    <button class="btn btn-success" id="btn-next">
                        Avanti
                        <svg class="icon icon-white" style="margin-left:6px;margin-right:0;"><use href="#icon-arrow-right"/></svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- PAGE 2: TRANSLATION -->
        <div id="page-translate" class="page">
            <!-- Search Card -->
            <div class="card collapsible expanded" id="search-card">
                <div class="card-header" onclick="toggleCard('search-card')">
                    <div class="card-title">
                        <svg class="icon"><use href="#icon-search"/></svg>
                        Step 2: Ricerca
                    </div>
                    <svg class="icon collapse-icon"><use href="#icon-chevron"/></svg>
                </div>
                <div class="card-body">
                    <div class="form-group">
                        <label>Ricerche recenti</label>
                        <select id="search-history-select">
                            <option value="">-- Seleziona o scrivi manualmente --</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Nome Tabella (fisico o logico)</label>
                        <input type="text" id="input-table" placeholder="es. MD_ARTI oppure Articoli">
                    </div>
                    <div class="form-group">
                        <label>Campi da cercare (opzionale)</label>
                        <textarea id="input-fields" rows="3" placeholder="Lascia vuoto per tutti i campi, oppure inserisci i nomi separati da virgola o a capo"></textarea>
                    </div>

                    <div class="buttons-row">
                        <button class="btn btn-primary" id="btn-translate">
                            <svg class="icon icon-white"><use href="#icon-search"/></svg>
                            Traduci
                        </button>
                        <button class="btn btn-primary" id="btn-back">
                            <svg class="icon icon-white"><use href="#icon-refresh"/></svg>
                            Nuova Connessione
                        </button>
                    </div>
                </div>
            </div>

            <!-- Results Card -->
            <div class="card collapsible disabled" id="results-card">
                <div class="card-header" onclick="toggleCard('results-card')">
                    <div class="card-title">
                        <svg class="icon"><use href="#icon-table"/></svg>
                        Risultati
                    </div>
                    <svg class="icon collapse-icon"><use href="#icon-chevron"/></svg>
                </div>
                <div class="card-body">
                    <!-- Tabs -->
                    <div class="tabs">
                        <div class="tab active" data-tab="tab-fields">
                            <svg class="icon"><use href="#icon-table"/></svg>
                            Tabella
                        </div>
                        <div class="tab" data-tab="tab-indexes">
                            <svg class="icon"><use href="#icon-key"/></svg>
                            Indici
                        </div>
                    </div>

                    <!-- Tab: Fields -->
                    <div id="tab-fields" class="tab-content active">
                        <div class="results-header">
                            <div class="current-table" id="current-table-name"></div>
                            <div style="display:flex;align-items:center;gap:15px;">
                                <p class="table-hint">Clicca su una cella per copiarne il valore</p>
                                <button class="btn btn-secondary" id="btn-copy-fields">
                                    <svg class="icon"><use href="#icon-copy"/></svg>
                                    Copia tutto
                                </button>
                            </div>
                        </div>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>TABELLA_FISICA</th>
                                        <th>CAMPO_FISICO</th>
                                        <th>TABELLA_LOGICA</th>
                                        <th>CAMPO_LOGICO</th>
                                        <th>TIPO</th>
                                        <th>AMPIEZZA</th>
                                        <th>DECIMALI</th>
                                    </tr>
                                </thead>
                                <tbody id="results-body"></tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Tab: Indexes -->
                    <div id="tab-indexes" class="tab-content">
                        <div class="results-header">
                            <p class="table-hint">Clicca su un indice per vedere le sue colonne</p>
                            <button class="btn btn-secondary" id="btn-copy-indexes">
                                <svg class="icon"><use href="#icon-copy"/></svg>
                                Copia tutto
                            </button>
                        </div>
                        
                        <div class="table-container">
                            <table id="indexes-table">
                                <thead>
                                    <tr>
                                        <th style="width:40px;"></th>
                                        <th>NOME_INDICE</th>
                                        <th>UNIQUENESS</th>
                                    </tr>
                                </thead>
                                <tbody id="indexes-body"></tbody>
                            </table>
                        </div>
                    </div>
                
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>